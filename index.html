<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prelude Realismo - Sistema de Staff</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #2c3e50;
            --primary-dark: #1a2530;
            --primary-light: #34495e;
            --secondary: #3498db;
            --secondary-dark: #2980b9;
            --accent: #e74c3c;
            --accent-dark: #c0392b;
            --success: #2ecc71;
            --success-dark: #27ae60;
            --warning: #f39c12;
            --warning-dark: #e67e22;
            --danger: #e74c3c;
            --danger-dark: #c0392b;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #95a5a6;
            --gray-light: #bdc3c7;
            --light-gray: #dfe6e9;
            --text: #2c3e50;
            --text-light: #7f8c8d;
            --sidebar-width: 250px;
            --header-height: 70px;
            --border-radius: 10px;
            --box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f8f9fa;
            color: var(--text);
            min-height: 100vh;
        }
        
        /* Login Screen */
        #login-screen {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100%;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        }
        
        .login-form {
            background-color: white;
            padding: 30px;
            border-radius: var(--border-radius);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 400px;
            animation: slideUp 0.5s ease;
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .login-form h2 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: var(--transition);
        }
        
        .form-group input:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: var(--secondary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--secondary-dark);
        }
        
        .btn-secondary {
            background: var(--gray-light);
            color: var(--text);
        }
        
        .btn-secondary:hover {
            background: var(--gray);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: var(--success-dark);
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background: var(--danger-dark);
        }
        
        .text-center {
            text-align: center;
        }
        
        .text-muted {
            color: var(--text-light);
        }
        
        .mt-20 {
            margin-top: 20px;
        }
        
        /* Main Interface */
        #main-interface {
            display: none;
            width: 100%;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--primary);
            color: white;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            padding: 20px 0;
            display: flex;
            flex-direction: column;
            z-index: 100;
            transition: var(--transition);
            box-shadow: var(--box-shadow);
        }
        
        .sidebar-header {
            padding: 0 20px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo img {
            height: 40px;
        }
        
        .logo h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .nav-links {
            flex: 1;
            overflow-y: auto;
        }
        
        .nav-item {
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            transition: var(--transition);
            border-left: 4px solid transparent;
        }
        
        .nav-item:hover, .nav-item.active {
            background: var(--primary-light);
            color: white;
            border-left-color: var(--secondary);
        }
        
        .nav-item i {
            width: 20px;
            text-align: center;
        }
        
        .sidebar-footer {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            margin-top: auto;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: var(--transition);
        }
        
        /* Header */
        header {
            height: var(--header-height);
            background: white;
            padding: 0 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 90;
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
            flex: 1;
        }
        
        .toggle-sidebar {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--text);
            display: none;
        }
        
        .page-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .header-actions {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .notification-btn, .quick-action-btn {
            background: none;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text);
            position: relative;
            transition: var(--transition);
        }
        
        .notification-btn:hover, .quick-action-btn:hover {
            background: var(--light);
        }
        
        .notification-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: var(--accent);
            color: white;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Content Area */
        .content {
            flex: 1;
            padding: 25px;
            overflow-y: auto;
        }
        
        /* Dashboard */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .dashboard-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            transition: var(--transition);
        }
        
        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .dashboard-card h3 {
            margin-bottom: 15px;
            color: var(--primary);
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .dashboard-card h3 i {
            color: var(--secondary);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .stat-item {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
            transition: var(--transition);
        }
        
        .stat-item:hover {
            background: var(--secondary);
            color: white;
        }
        
        .stat-item:hover .stat-value,
        .stat-item:hover .stat-label {
            color: white;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary);
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }
        
        .action-btn {
            background: var(--light);
            border: none;
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .action-btn:hover {
            background: var(--secondary);
            color: white;
        }
        
        .action-btn i {
            font-size: 1.5rem;
        }
        
        /* Board */
        .board-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
            margin-bottom: 20px;
        }
        
        .board-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .board-actions {
            display: flex;
            gap: 10px;
        }
        
        .columns {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding-bottom: 15px;
        }
        
        .column {
            background-color: #f5f7fa;
            border-radius: var(--border-radius);
            padding: 15px;
            min-width: 300px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .column-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }
        
        .column-title {
            font-weight: 600;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .column-count {
            background: var(--light);
            color: var(--text);
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: 20px;
        }
        
        .cards {
            display: flex;
            flex-direction: column;
            gap: 15px;
            min-height: 100px;
        }
        
        .card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            cursor: grab;
            position: relative;
            transition: var(--transition);
            border-left: 4px solid var(--secondary);
        }
        
        .card:hover {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .card.priority-high {
            border-left-color: var(--danger);
        }
        
        .card.priority-medium {
            border-left-color: var(--warning);
        }
        
        .card.priority-low {
            border-left-color: var(--success);
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            position: relative;
        }
        
        .card-title {
            font-weight: 600;
            font-size: 1rem;
        }
        
        .card-id {
            color: var(--gray);
            font-size: 0.8rem;
        }
        
        .card-content {
            margin-bottom: 15px;
        }
        
        .card-field {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            font-size: 0.9rem;
        }
        
        .card-field i {
            margin-right: 8px;
            color: var(--secondary);
            width: 16px;
        }
        
        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-actions {
            display: flex;
            gap: 10px;
        }
        
        .card-action {
            background: none;
            border: none;
            color: var(--secondary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }
        
        .card-action:hover {
            color: var(--secondary-dark);
        }
        
        .timer {
            background-color: var(--warning);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .card-priority {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 20px;
            background: var(--light);
        }
        
        .priority-high {
            background: var(--danger);
            color: white;
        }
        
        .priority-medium {
            background: var(--warning);
            color: white;
        }
        
        .priority-low {
            background: var(--success);
            color: white;
        }
        
        /* Player Profile */
        .profile-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
        }
        
        .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .search-box {
            display: flex;
            gap: 10px;
        }
        
        .search-input {
            padding: 10px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            min-width: 250px;
        }
        
        .profile-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 20px;
        }
        
        .profile-info {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 20px;
        }
        
        .profile-stats {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .stat-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .counter-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }
        
        .counter-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            cursor: pointer;
            border: none;
            color: white;
            transition: var(--transition);
        }
        
        .decrement {
            background-color: var(--danger);
        }
        
        .decrement:hover {
            background-color: var(--danger-dark);
        }
        
        .increment {
            background-color: var(--success);
        }
        
        .increment:hover {
            background-color: var(--success-dark);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--secondary);
            min-width: 50px;
            display: inline-block;
        }
        
        .stat-label {
            color: var(--text-light);
            font-size: 0.9rem;
        }
        
        .profile-history {
            background: var(--light);
            border-radius: var(--border-radius);
            padding: 20px;
            max-height: 600px;
            overflow-y: auto;
        }
        
        .history-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            gap: 15px;
        }
        
        .history-item:last-child {
            border-bottom: none;
        }
        
        .history-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-shrink: 0;
        }
        
        .history-content {
            flex: 1;
        }
        
        .history-title {
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .history-date {
            color: var(--text-light);
            font-size: 0.8rem;
        }
        
        /* Notes Section */
        .notes-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
        }
        
        .notes-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .notes-content {
            min-height: 400px;
        }
        
        .notes-textarea {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-family: inherit;
            font-size: 16px;
            resize: vertical;
        }
        
        .notes-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 15px;
        }
        
        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal-content {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 25px;
            width: 100%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: var(--primary);
            font-weight: 600;
        }
        
        .close-modal {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
            transition: var(--transition);
        }
        
        .close-modal:hover {
            color: var(--danger);
        }
        
        .modal-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text);
        }
        
        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            font-size: 16px;
            transition: var(--transition);
        }
        
        .form-group input:focus, .form-group textarea:focus, .form-group select:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }
        
        .full-width {
            grid-column: 1 / -1;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
            align-items: center;
        }
        
        .form-row button {
            white-space: nowrap;
        }
        
        /* Player Selection */
        .player-selection {
            background-color: var(--light);
            padding: 15px;
            border-radius: var(--border-radius);
            margin-bottom: 15px;
        }
        
        .player-list {
            max-height: 200px;
            overflow-y: auto;
            margin-top: 10px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            background-color: white;
        }
        
        .player-item {
            padding: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .player-item:hover {
            background-color: #f1f2f6;
            border-radius: var(--border-radius);
        }
        
        .player-item:last-child {
            border-bottom: none;
        }
        
        /* Activity List */
        .activity-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .activity-item {
            padding: 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            gap: 15px;
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .activity-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            flex-shrink: 0;
        }
        
        .activity-content {
            flex: 1;
        }
        
        .activity-title {
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .activity-date {
            color: var(--text-light);
            font-size: 0.8rem;
        }
        
        /* Overlay para mobile */
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 99;
        }
        
        /* Adicionar estilo para a lista de players na aba de fichas */
        .players-list-container {
            margin-top: 20px;
            background: white;
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: var(--box-shadow);
        }
        
        .players-list-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .players-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .player-list-item {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition);
        }
        
        .player-list-item:hover {
            background-color: #f8f9fa;
        }
        
        .player-list-item:last-child {
            border-bottom: none;
        }
        
        .player-info {
            display: flex;
            flex-direction: column;
        }
        
        .player-actions {
            display: flex;
            gap: 10px;
        }
        
        .player-stats {
            display: flex;
            gap: 15px;
            margin-top: 5px;
        }
        
        .player-stat {
            font-size: 0.8rem;
            padding: 3px 8px;
            border-radius: 12px;
            background: var(--light);
        }
        
        .player-stat.strikes {
            background: var(--danger);
            color: white;
        }
        
        .player-stat.warnings {
            background: var(--warning);
            color: white;
        }
        
        /* Screenshots Gallery */
        .screenshots-container {
            margin-top: 15px;
            border: 1px solid #ddd;
            border-radius: var(--border-radius);
            padding: 15px;
            background: #f9f9f9;
        }
        
        .screenshots-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }
        
        .screenshot-item {
            position: relative;
            border-radius: var(--border-radius);
            overflow: hidden;
            height: 100px;
            cursor: pointer;
        }
        
        .screenshot-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }
        
        .screenshot-item:hover img {
            transform: scale(1.05);
        }
        
        .screenshot-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: var(--danger);
            color: white;
            border: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 0.7rem;
        }
        
        /* Modal para visualizar imagem em tamanho maior */
        .image-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
            z-index: 1001;
        }
        
        .image-modal-content {
            max-width: 90%;
            max-height: 90%;
        }
        
        .image-modal-content img {
            width: 100%;
            height: auto;
            border-radius: var(--border-radius);
        }
        
        .close-image-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
        }
        
        /* New Category Modal */
        .add-category-btn {
            background: var(--success);
            color: white;
        }
        
        /* Responsividade */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .toggle-sidebar {
                display: block;
            }
            
            .overlay.active {
                display: block;
            }
            
            .columns {
                flex-direction: column;
            }
            
            .column {
                min-width: 100%;
            }
            
            .profile-content {
                grid-template-columns: 1fr;
            }
            
            .modal-form {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .header-actions {
                display: none;
            }
            
            .board-header, .profile-header, .notes-header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
            
            .search-box {
                width: 100%;
            }
            
            .search-input {
                min-width: auto;
                flex: 1;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
            
            .quick-actions {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .content {
                padding: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .quick-actions {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                padding: 15px;
            }
        }
        
        /* Animações e utilidades */
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .slide-in {
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(-10px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .badge-success {
            background: var(--success);
            color: white;
        }
        
        .badge-warning {
            background: var(--warning);
            color: white;
        }
        
        .badge-danger {
            background: var(--danger);
            color: white;
        }
        
        .badge-info {
            background: var(--secondary);
            color: white;
        }
        
        .text-center {
            text-align: center;
        }
        
        .text-muted {
            color: var(--text-light);
        }
        
        .mt-20 {
            margin-top: 20px;
        }
        
        .mb-20 {
            margin-bottom: 20px;
        }
        
        /* Scrollbar personalizado */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--gray-light);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--gray);
        }
    </style>
</head>
<body>
    <!-- Overlay para mobile -->
    <div class="overlay" id="overlay"></div>

    <!-- Tela de Login -->
    <div id="login-screen">
        <div class="login-form">
            <h2><i class="fas fa-dragon"></i> Prelude Realismo</h2>
            <div class="form-group">
                <label for="username">Usuário</label>
                <input type="text" id="username" placeholder="Digite seu usuário">
            </div>
            <div class="form-group">
                <label for="password">Senha</label>
                <input type="password" id="password" placeholder="Digite sua senha">
            </div>
            <button id="login-btn" class="btn btn-primary">Entrar</button>
            <p class="text-center text-muted mt-20">Sistema de Gerenciamento de Staff</p>
        </div>
    </div>

    <!-- Interface Principal (inicialmente oculta) -->
    <div id="main-interface">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-dragon"></i>
                    <h1>Prelude</h1>
                </div>
            </div>
            
            <div class="nav-links">
                <a href="#" class="nav-item active" data-target="dashboard">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </a>
                <a href="#" class="nav-item" data-target="board">
                    <i class="fas fa-clipboard-list"></i>
                    <span>Quadro de Denúncias</span>
                </a>
                <a href="#" class="nav-item" data-target="player-profile">
                    <i class="fas fa-users"></i>
                    <span>Fichas de Players</span>
                </a>
                <a href="#" class="nav-item" data-target="notes">
                    <i class="fas fa-sticky-note"></i>
                    <span>Anotações Gerais</span>
                </a>
            </div>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar" id="user-avatar">SM</div>
                    <div>
                        <div id="user-name">Staff Member</div>
                        <small class="text-muted" id="user-role">Administrador</small>
                    </div>
                </div>
                <button id="logout-btn" class="btn btn-secondary full-width">
                    <i class="fas fa-sign-out-alt"></i> Sair
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header -->
            <header>
                <div class="header-left">
                    <button class="toggle-sidebar" id="toggle-sidebar">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2 class="page-title">Dashboard</h2>
                </div>
                
                <div class="header-actions">
                    <button class="notification-btn">
                        <i class="fas fa-bell"></i>
                        <span class="notification-badge">3</span>
                    </button>
                    <button class="quick-action-btn">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </header>

            <!-- Content Area -->
            <div class="content">
                <!-- Dashboard -->
                <section id="dashboard" class="content-section">
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <h3><i class="fas fa-chart-bar"></i> Estatísticas de Denúncias</h3>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-value" id="current-month-reports">0</div>
                                    <div class="stat-label">Finalizadas Este Mês</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="previous-month-reports">0</div>
                                    <div class="stat-label">Finalizadas Mês Anterior</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="in-progress">0</div>
                                    <div class="stat-label">Em Andamento</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="total-reports">0</div>
                                    <div class="stat-label">Total de Denúncias</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card">
                            <h3><i class="fas fa-user-times"></i> Estatísticas de Players</h3>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-value" id="players-with-strikes">0</div>
                                    <div class="stat-label">Players com Strikes</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="players-with-warnings">0</div>
                                    <div class="stat-label">Players com Advertências</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="total-players">0</div>
                                    <div class="stat-label">Total de Players</div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-value" id="active-timers">0</div>
                                    <div class="stat-label">Timers Ativos</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dashboard-card">
                            <h3><i class="fas fa-bolt"></i> Ações Rápidas</h3>
                            <div class="quick-actions">
                                <button class="action-btn" id="new-report-btn">
                                    <i class="fas fa-plus-circle"></i>
                                    <span>Nova Denúncia</span>
                                </button>
                                <button class="action-btn" id="new-player-btn">
                                    <i class="fas fa-user-plus"></i>
                                    <span>Nova Ficha</span>
                                </button>
                                <button class="action-btn" id="refresh-stats-btn">
                                    <i class="fas fa-sync-alt"></i>
                                    <span>Atualizar</span>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <h3><i class="fas fa-history"></i> Atividade Recente</h3>
                        <div class="activity-list" id="activity-list">
                            <div class="activity-item">
                                <div class="activity-icon">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <div class="activity-content">
                                    <div class="activity-title">Sistema iniciado</div>
                                    <div class="activity-date">Agora mesmo</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Quadro de Denúncias -->
                <section id="board" class="content-section" style="display: none;">
                    <div class="board-container">
                        <div class="board-header">
                            <h2>Quadro de Denúncias</h2>
                            <div class="board-actions">
                                <button id="back-to-dashboard" class="btn btn-secondary">
                                    <i class="fas fa-arrow-left"></i> Voltar
                                </button>
                                <button id="add-card-btn" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Nova Denúncia
                                </button>
                                <button id="add-category-btn" class="btn btn-success">
                                    <i class="fas fa-plus"></i> Novo Tópico
                                </button>
                            </div>
                        </div>
                        
                        <div class="columns" id="board-columns">
                            <!-- As colunas serão geradas dinamicamente via JavaScript -->
                        </div>
                    </div>
                </section>

                <!-- Fichas de Players -->
                <section id="player-profile" class="content-section" style="display: none;">
                    <div class="profile-container">
                        <div class="profile-header">
                            <h2>Fichas de Players</h2>
                            <div class="search-box">
                                <input type="text" id="player-search" class="search-input" placeholder="Buscar por ID Steam ou Discord">
                                <button id="search-btn" class="btn btn-primary">
                                    <i class="fas fa-search"></i> Buscar
                                </button>
                            </div>
                        </div>
                        
                        <div class="profile-content">
                            <div class="profile-info">
                                <h3>Informações do Player</h3>
                                <input type="hidden" id="player-id">
                                <div class="form-group">
                                    <label for="profile-steam-id">ID Steam</label>
                                    <input type="text" id="profile-steam-id">
                                </div>
                                <div class="form-group">
                                    <label for="profile-discord-id">ID Discord</label>
                                    <input type="text" id="profile-discord-id">
                                </div>
                                <div class="form-group">
                                    <label for="profile-behavior">Comportamento em Call</label>
                                    <textarea id="profile-behavior" rows="3"></textarea>
                                </div>
                                <div class="profile-stats">
                                    <div class="stat-card">
                                        <div class="stat-value" id="strikes-count">0</div>
                                        <div class="stat-label">Strikes</div>
                                        <div class="counter-controls">
                                            <button class="counter-btn decrement" onclick="updateStrikes(-1)">-</button>
                                            <button class="counter-btn increment" onclick="updateStrikes(1)">+</button>
                                        </div>
                                    </div>
                                    <div class="stat-card">
                                        <div class="stat-value" id="warnings-count">0</div>
                                        <div class="stat-label">Orientações</div>
                                        <div class="counter-controls">
                                            <button class="counter-btn decrement" onclick="updateWarnings(-1)">-</button>
                                            <button class="counter-btn increment" onclick="updateWarnings(1)">+</button>
                                        </div>
                                    </div>
                                </div>
                                <button class="btn btn-success full-width" style="margin-top: 20px;" id="save-profile-btn">
                                    <i class="fas fa-save"></i> Salvar Ficha
                                </button>
                            </div>
                            <div class="profile-history">
                                <h3>Histórico de Ocorrências</h3>
                                <div id="history-list">
                                    <div class="text-center text-muted mt-20">
                                        <i class="fas fa-history fa-2x"></i>
                                        <p>Nenhum histórico encontrado</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Lista de Players -->
                        <div class="players-list-container">
                            <div class="players-list-header">
                                <h3>Lista de Players</h3>
                                <div class="search-box">
                                    <input type="text" id="player-list-search" class="search-input" placeholder="Buscar por ID Steam">
                                    <button class="btn btn-secondary" id="refresh-players-btn">
                                        <i class="fas fa-sync-alt"></i> Atualizar
                                    </button>
                                </div>
                            </div>
                            <div class="players-list" id="players-list">
                                <!-- Lista de players será preenchida via JavaScript -->
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Anotações Gerais -->
                <section id="notes" class="content-section" style="display: none;">
                    <div class="notes-container">
                        <div class="notes-header">
                            <h2>Anotações Gerais</h2>
                            <button id="save-notes-btn" class="btn btn-primary">
                                <i class="fas fa-save"></i> Salvar Anotações
                            </button>
                        </div>
                        
                        <div class="notes-content">
                            <textarea id="notes-textarea" class="notes-textarea" placeholder="Digite suas anotações aqui..."></textarea>
                            <div class="notes-actions">
                                <button id="clear-notes-btn" class="btn btn-secondary">
                                    <i class="fas fa-trash"></i> Limpar
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Modal para Adicionar/Editar Cartão -->
    <div id="card-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title">Nova Denúncia</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="card-form" class="modal-form">
                <input type="hidden" id="card-id">
                
                <div class="form-group">
                    <label for="ticket-number">Número do Ticket</label>
                    <input type="text" id="ticket-number" required>
                </div>
                
                <div class="form-group">
                    <label for="priority">Prioridade</label>
                    <select id="priority">
                        <option value="low">Baixa</option>
                        <option value="medium">Média</option>
                        <option value="high">Alta</option>
                    </select>
                </div>
                
                <div class="form-group full-width">
                    <label>Selecionar Player Existente</label>
                    <div class="player-selection">
                        <input type="text" id="player-search-input" placeholder="Buscar player...">
                        <div class="player-list" id="player-list-modal">
                            <!-- Lista de players será preenchida via JavaScript -->
                        </div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="steam-id-input">ID Steam</label>
                    <div class="form-row">
                        <input type="text" id="steam-id-input" required>
                        <button type="button" id="search-steam-btn" class="btn btn-secondary">Pesquisar</button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="discord-id-input">ID Discord</label>
                    <input type="text" id="discord-id-input" required>
                </div>
                
                <div class="form-group full-width">
                    <label for="description">Descrição do Caso</label>
                    <textarea id="description" rows="4" required></textarea>
                </div>
                
                <div class="form-group full-width">
                    <label for="screenshots">Anexar Prints</label>
                    <div class="screenshots-container">
                        <input type="file" id="screenshots" accept="image/*" multiple>
                        <div class="screenshots-gallery" id="screenshots-gallery">
                            <!-- Preview das screenshots será adicionado aqui -->
                        </div>
                    </div>
                </div>
                
                <div class="form-group full-width">
                    <label for="replay-file">Anexar Arquivo .replay</label>
                    <input type="file" id="replay-file" accept=".replay">
                </div>
                
                <div class="form-group">
                    <button type="button" id="start-timer" class="btn btn-success">
                        <i class="fas fa-clock"></i> Iniciar Timer 24h
                    </button>
                </div>
                
                <div class="form-group">
                    <span id="timer-display" class="timer" style="display: none;">24:00:00</span>
                </div>
                
                <div class="form-group full-width">
                    <button type="submit" id="save-card-btn" class="btn btn-primary">
                        <i class="fas fa-save"></i> Salvar
                    </button>
                    <button type="button" class="btn btn-danger" id="delete-card-btn" style="display: none;">
                        <i class="fas fa-trash"></i> Excluir
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para visualizar imagem em tamanho maior -->
    <div id="image-modal" class="image-modal">
        <button class="close-image-modal">&times;</button>
        <div class="image-modal-content">
            <img id="expanded-img" src="">
        </div>
    </div>

    <!-- Modal para Adicionar Novo Tópico -->
    <div id="category-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Adicionar Novo Tópico</h3>
                <button class="close-modal">&times;</button>
            </div>
            <form id="category-form">
                <div class="form-group">
                    <label for="category-name">Nome do Tópico</label>
                    <input type="text" id="category-name" required>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary">Adicionar Tópico</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal para Vincular Denúncia a Player -->
    <div id="link-report-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Vincular Denúncia a Player</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="form-group">
                <label>Selecione o Player</label>
                <select id="player-to-link" class="full-width">
                    <!-- Options serão preenchidas via JavaScript -->
                </select>
            </div>
            <div class="form-group">
                <button id="confirm-link" class="btn btn-primary">Vincular</button>
            </div>
        </div>
    </div>

    <!-- Modal para Visualizar Histórico -->
    <div id="history-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Histórico de Ocorrências</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="modal-history-list">
                    <!-- Histórico será preenchido via JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dados iniciais
        let users = [
            { username: 'admin', password: 'admin123', role: 'Administrador' },
            { username: 'staff', password: 'staff123', role: 'Moderador' }
        ];
        
        let currentUser = null;
        let cards = JSON.parse(localStorage.getItem('cards')) || [];
        let players = JSON.parse(localStorage.getItem('players')) || [];
        let timers = JSON.parse(localStorage.getItem('timers')) || {};
        let notes = JSON.parse(localStorage.getItem('notes')) || '';
        let activities = JSON.parse(localStorage.getItem('activities')) || [];
        let categories = JSON.parse(localStorage.getItem('categories')) || [
            'Denuncias Pegas',
            'Denuncias Em andamento',
            'Denuncias em Stand-by',
            'Denuncias Finalizadas',
            'Denuncias Expiradas'
        ];
        
        let currentCardId = null;
        let currentPlayerId = null;
        let screenshots = [];
        let currentLinkingCard = null;
        
        // Elementos da DOM
        const loginScreen = document.getElementById('login-screen');
        const mainInterface = document.getElementById('main-interface');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginBtn = document.getElementById('login-btn');
        const logoutBtn = document.getElementById('logout-btn');
        const navItems = document.querySelectorAll('.nav-item');
        const contentSections = document.querySelectorAll('.content-section');
        const columnsContainer = document.getElementById('board-columns');
        const cardModal = document.getElementById('card-modal');
        const cardForm = document.getElementById('card-form');
        const categoryModal = document.getElementById('category-modal');
        const categoryForm = document.getElementById('category-form');
        const linkReportModal = document.getElementById('link-report-modal');
        const historyModal = document.getElementById('history-modal');
        const imageModal = document.getElementById('image-modal');
        const startTimerBtn = document.getElementById('start-timer');
        const timerDisplay = document.getElementById('timer-display');
        const newReportBtn = document.getElementById('new-report-btn');
        const newPlayerBtn = document.getElementById('new-player-btn');
        const refreshStatsBtn = document.getElementById('refresh-stats-btn');
        const addCardBtn = document.getElementById('add-card-btn');
        const addCategoryBtn = document.getElementById('add-category-btn');
        const backToDashboardBtn = document.getElementById('back-to-dashboard');
        const playerSearchInput = document.getElementById('player-search-input');
        const playerListModal = document.getElementById('player-list-modal');
        const searchSteamBtn = document.getElementById('search-steam-btn');
        const modalTitle = document.getElementById('modal-title');
        const saveCardBtn = document.getElementById('save-card-btn');
        const deleteCardBtn = document.getElementById('delete-card-btn');
        const cardIdInput = document.getElementById('card-id');
        const saveProfileBtn = document.getElementById('save-profile-btn');
        const playerIdInput = document.getElementById('player-id');
        const profileSteamIdInput = document.getElementById('profile-steam-id');
        const profileDiscordIdInput = document.getElementById('profile-discord-id');
        const profileBehaviorInput = document.getElementById('profile-behavior');
        const strikesCountElement = document.getElementById('strikes-count');
        const warningsCountElement = document.getElementById('warnings-count');
        const playerSearchMain = document.getElementById('player-search');
        const playerListSearch = document.getElementById('player-list-search');
        const searchBtn = document.getElementById('search-btn');
        const toggleSidebarBtn = document.getElementById('toggle-sidebar');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const pageTitle = document.querySelector('.page-title');
        const currentMonthReportsElement = document.getElementById('current-month-reports');
        const previousMonthReportsElement = document.getElementById('previous-month-reports');
        const inProgressElement = document.getElementById('in-progress');
        const totalReportsElement = document.getElementById('total-reports');
        const playersWithStrikesElement = document.getElementById('players-with-strikes');
        const playersWithWarningsElement = document.getElementById('players-with-warnings');
        const totalPlayersElement = document.getElementById('total-players');
        const activeTimersElement = document.getElementById('active-timers');
        const activityList = document.getElementById('activity-list');
        const notesTextarea = document.getElementById('notes-textarea');
        const saveNotesBtn = document.getElementById('save-notes-btn');
        const clearNotesBtn = document.getElementById('clear-notes-btn');
        const userAvatar = document.getElementById('user-avatar');
        const userName = document.getElementById('user-name');
        const userRole = document.getElementById('user-role');
        const playersListContainer = document.getElementById('players-list');
        const refreshPlayersBtn = document.getElementById('refresh-players-btn');
        const screenshotsInput = document.getElementById('screenshots');
        const screenshotsGallery = document.getElementById('screenshots-gallery');
        const categoryNameInput = document.getElementById('category-name');
        const playerToLinkSelect = document.getElementById('player-to-link');
        const confirmLinkBtn = document.getElementById('confirm-link');
        const expandedImg = document.getElementById('expanded-img');
        const closeImageModal = document.querySelector('.close-image-modal');
        const modalHistoryList = document.getElementById('modal-history-list');
        
        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Verificar se há um usuário logado
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showMainInterface();
            }
            
            // Carregar anotações salvas
            notesTextarea.value = notes;
            
            // Inicializar a lista de players
            renderPlayerList();
            
            // Configurar event listeners
            setupEventListeners();
            
            // Inicializar estatísticas
            updateStats();
            
            // Carregar atividades
            renderActivities();
            
            // Renderizar lista de players
            renderPlayersList();
            
            // Renderizar colunas
            renderColumns();
        });
        
        // Configurar event listeners
        function setupEventListeners() {
            loginBtn.addEventListener('click', login);
            logoutBtn.addEventListener('click', logout);
            
            navItems.forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const target = this.getAttribute('data-target');
                    showSection(target);
                    
                    // Atualizar classe active
                    navItems.forEach(i => i.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Atualizar título da página
                    pageTitle.textContent = this.querySelector('span').textContent;
                    
                    // Se for o quadro de denúncias, renderizar as colunas
                    if (target === 'board') {
                        renderColumns();
                    }
                    
                    // Se for a ficha de players, renderizar a lista de players
                    if (target === 'player-profile') {
                        renderPlayersList();
                    }
                    
                    // Fechar sidebar em mobile
                    if (window.innerWidth <= 1024) {
                        closeSidebar();
                    }
                });
            });
            
            cardForm.addEventListener('submit', function(e) {
                e.preventDefault();
                saveCard();
            });
            
            categoryForm.addEventListener('submit', function(e) {
                e.preventDefault();
                addCategory();
            });
            
            confirmLinkBtn.addEventListener('click', linkReportToPlayer);
            
            startTimerBtn.addEventListener('click', startTimer);
            
            newReportBtn.addEventListener('click', function() {
                showSection('board');
                setTimeout(() => document.getElementById('add-card-btn').click(), 100);
            });
            
            newPlayerBtn.addEventListener('click', function() {
                showSection('player-profile');
                resetPlayerForm();
            });
            
            refreshStatsBtn.addEventListener('click', function() {
                updateStats();
                addActivity('Estatísticas atualizadas manualmente');
                showNotification('Estatísticas atualizadas com sucesso!', 'success');
            });
            
            addCardBtn.addEventListener('click', function() {
                showModal();
            });
            
            addCategoryBtn.addEventListener('click', function() {
                categoryModal.style.display = 'flex';
            });
            
            backToDashboardBtn.addEventListener('click', function() {
                showSection('dashboard');
                navItems.forEach(i => i.classList.remove('active'));
                document.querySelector('[data-target="dashboard"]').classList.add('active');
                pageTitle.textContent = 'Dashboard';
            });
            
            playerSearchInput.addEventListener('input', function() {
                filterPlayers(this.value);
            });
            
            playerListSearch.addEventListener('input', function() {
                filterPlayersList(this.value);
            });
            
            searchSteamBtn.addEventListener('click', function() {
                const steamId = document.getElementById('steam-id-input').value;
                if (steamId) {
                    window.open(`https://www.steamidfinder.com/lookup/${steamId}/`, '_blank');
                } else {
                    showNotification('Por favor, insira um ID Steam para pesquisar.', 'warning');
                }
            });
            
            deleteCardBtn.addEventListener('click', function() {
                confirmAction('Tem certeza que deseja excluir esta denúncia?', () => {
                    deleteCard(currentCardId);
                });
            });
            
            saveProfileBtn.addEventListener('click', savePlayerProfile);
            
            searchBtn.addEventListener('click', searchPlayer);
            
            playerSearchMain.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchPlayer();
                }
            });
            
            // Controle do sidebar
            toggleSidebarBtn.addEventListener('click', toggleSidebar);
            
            overlay.addEventListener('click', closeSidebar);
            
            document.querySelectorAll('.close-modal').forEach(btn => {
                btn.addEventListener('click', function() {
                    hideModal();
                });
            });
            
            closeImageModal.addEventListener('click', function() {
                imageModal.style.display = 'none';
            });
            
            // Anotações
            saveNotesBtn.addEventListener('click', saveNotes);
            clearNotesBtn.addEventListener('click', clearNotes);
            
            // Fechar modal clicando fora dele
            window.addEventListener('click', function(e) {
                if (e.target === cardModal || e.target === categoryModal || e.target === linkReportModal || e.target === historyModal) {
                    hideModal();
                }
                if (e.target === imageModal) {
                    imageModal.style.display = 'none';
                }
            });
            
            // Atualizar lista de players
            refreshPlayersBtn.addEventListener('click', renderPlayersList);
            
            // Preview de screenshots
            screenshotsInput.addEventListener('change', handleScreenshotUpload);
        }
        
        // Funções para controle do sidebar
        function toggleSidebar() {
            sidebar.classList.toggle('active');
            overlay.classList.toggle('active');
            
            if (sidebar.classList.contains('active')) {
                toggleSidebarBtn.innerHTML = '<i class="fas fa-times"></i>';
            } else {
                toggleSidebarBtn.innerHTML = '<i class="fas fa-bars"></i>';
            }
        }
        
        function closeSidebar() {
            sidebar.classList.remove('active');
            overlay.classList.remove('active');
            toggleSidebarBtn.innerHTML = '<i class="fas fa-bars"></i>';
        }
        
        // Funções
        function login() {
            const username = usernameInput.value;
            const password = passwordInput.value;
            
            if (!username || !password) {
                showNotification('Por favor, preencha todos os campos!', 'warning');
                return;
            }
            
            const user = users.find(u => u.username === username && u.password === password);
            
            if (user) {
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(user));
                showMainInterface();
                
                // Atualizar informações do usuário na sidebar
                userAvatar.textContent = user.username.charAt(0).toUpperCase();
                userName.textContent = user.username;
                userRole.textContent = user.role;
                
                addActivity('Login realizado no sistema');
                showNotification('Login realizado com sucesso!', 'success');
            } else {
                showNotification('Usuário ou senha incorretos!', 'error');
            }
        }
        
        function logout() {
            confirmAction('Tem certeza que deseja sair?', () => {
                addActivity('Logout realizado do sistema');
                currentUser = null;
                localStorage.removeItem('currentUser');
                hideMainInterface();
                showNotification('Logout realizado com sucesso!', 'success');
            });
        }
        
        function showMainInterface() {
            loginScreen.style.display = 'none';
            mainInterface.style.display = 'flex';
            showSection('dashboard');
            updateStats();
        }
        
        function hideMainInterface() {
            mainInterface.style.display = 'none';
            loginScreen.style.display = 'flex';
            usernameInput.value = '';
            passwordInput.value = '';
        }
        
        function showSection(sectionName) {
            // Esconder todas as seções
            contentSections.forEach(section => {
                section.style.display = 'none';
            });
            
            // Mostrar a seção solicitada
            document.getElementById(sectionName).style.display = 'block';
        }
        
        function showModal(cardId = null) {
            currentCardId = cardId;
            
            if (cardId) {
                // Modo edição
                modalTitle.textContent = 'Editar Denúncia';
                saveCardBtn.textContent = 'Atualizar';
                deleteCardBtn.style.display = 'inline-block';
                
                // Preencher formulário com dados existentes
                const card = cards.find(c => c.id === cardId);
                if (card) {
                    cardIdInput.value = card.id;
                    document.getElementById('ticket-number').value = card.ticketNumber;
                    document.getElementById('steam-id-input').value = card.steamId;
                    document.getElementById('discord-id-input').value = card.discordId;
                    document.getElementById('description').value = card.description;
                    document.getElementById('priority').value = card.priority || 'low';
                    
                    // Carregar screenshots
                    screenshots = card.screenshots || [];
                    renderScreenshots();
                    
                    // Mostrar timer se existir
                    if (timers[cardId]) {
                        timerDisplay.style.display = 'inline-block';
                        timerDisplay.textContent = formatTime(timers[cardId].remaining);
                    }
                }
            } else {
                // Modo criação
                modalTitle.textContent = 'Nova Denúncia';
                saveCardBtn.textContent = 'Salvar';
                deleteCardBtn.style.display = 'none';
                
                // Limpar formulário
                cardForm.reset();
                screenshots = [];
                renderScreenshots();
                timerDisplay.style.display = 'none';
                document.getElementById('priority').value = 'low';
            }
            
            cardModal.style.display = 'flex';
        }
        
        function hideModal() {
            cardModal.style.display = 'none';
            categoryModal.style.display = 'none';
            linkReportModal.style.display = 'none';
            historyModal.style.display = 'none';
        }
        
        function renderColumns() {
            columnsContainer.innerHTML = '';
            
            categories.forEach(category => {
                const column = document.createElement('div');
                column.className = 'column';
                column.dataset.category = category;
                
                const columnHeader = document.createElement('div');
                columnHeader.className = 'column-header';
                
                const columnTitle = document.createElement('div');
                columnTitle.className = 'column-title';
                
                const icon = document.createElement('i');
                switch(category) {
                    case 'Denuncias Pegas':
                        icon.className = 'fas fa-clipboard-check';
                        break;
                    case 'Denuncias Em andamento':
                        icon.className = 'fas fa-tasks';
                        break;
                    case 'Denuncias em Stand-by':
                        icon.className = 'fas fa-pause-circle';
                        break;
                    case 'Denuncias Finalizadas':
                        icon.className = 'fas fa-check-circle';
                        break;
                    case 'Denuncias Expiradas':
                        icon.className = 'fas fa-clock';
                        break;
                    default:
                        icon.className = 'fas fa-list';
                }
                
                columnTitle.appendChild(icon);
                columnTitle.appendChild(document.createTextNode(category));
                
                const countSpan = document.createElement('span');
                countSpan.className = 'column-count';
                countSpan.textContent = cards.filter(card => card.category === category).length;
                columnTitle.appendChild(countSpan);
                
                columnHeader.appendChild(columnTitle);
                
                const cardsContainer = document.createElement('div');
                cardsContainer.className = 'cards';
                cardsContainer.dataset.category = category;
                
                // Adicionar cards a esta coluna
                const categoryCards = cards.filter(card => card.category === category);
                categoryCards.forEach(card => {
                    const cardElement = createCardElement(card);
                    cardsContainer.appendChild(cardElement);
                });
                
                column.appendChild(columnHeader);
                column.appendChild(cardsContainer);
                
                columnsContainer.appendChild(column);
            });
            
            // Configurar funcionalidade de arrastar e soltar
            setupDragAndDrop();
        }
        
        function setupDragAndDrop() {
            const cards = document.querySelectorAll('.card');
            const columns = document.querySelectorAll('.cards');
            
            cards.forEach(card => {
                card.addEventListener('dragstart', dragStart);
                card.addEventListener('dragend', dragEnd);
            });
            
            columns.forEach(column => {
                column.addEventListener('dragover', dragOver);
                column.addEventListener('dragenter', dragEnter);
                column.addEventListener('dragleave', dragLeave);
                column.addEventListener('drop', dragDrop);
            });
        }
        
        function dragStart() {
            this.classList.add('dragging');
        }
        
        function dragEnd() {
            this.classList.remove('dragging');
        }
        
        function dragOver(e) {
            e.preventDefault();
        }
        
        function dragEnter(e) {
            e.preventDefault();
            this.style.backgroundColor = '#e1e8f0';
        }
        
        function dragLeave() {
            this.style.backgroundColor = '';
        }
        
        function dragDrop() {
            this.style.backgroundColor = '';
            const cardId = document.querySelector('.dragging').dataset.id;
            const newCategory = this.dataset.category;
            
            // Atualizar a categoria do card
            const cardIndex = cards.findIndex(c => c.id === cardId);
            if (cardIndex !== -1) {
                const oldCategory = cards[cardIndex].category;
                cards[cardIndex].category = newCategory;
                cards[cardIndex].updatedAt = new Date().toISOString();
                
                // Salvar no localStorage
                localStorage.setItem('cards', JSON.stringify(cards));
                
                // Registrar atividade
                addActivity(`Denúncia #${cards[cardIndex].ticketNumber} movida de ${oldCategory} para ${newCategory}`);
                
                // Atualizar estatísticas
                updateStats();
                
                showNotification('Denúncia movida com sucesso!', 'success');
                
                // Se a denúncia foi movida para "Finalizadas", atualizar a lista de players
                if (newCategory === 'Denuncias Finalizadas') {
                    renderPlayersList();
                }
                
                // Atualizar a visualização do quadro
                renderColumns();
            }
        }
        
        function createCardElement(card) {
            const cardElement = document.createElement('div');
            cardElement.className = `card ${card.priority ? 'priority-' + card.priority : ''}`;
            cardElement.dataset.id = card.id;
            cardElement.draggable = true;
            
            if (card.priority) {
                const prioritySpan = document.createElement('span');
                prioritySpan.className = `card-priority priority-${card.priority}`;
                prioritySpan.textContent = card.priority === 'high' ? 'Alta' : (card.priority === 'medium' ? 'Média' : 'Baixa');
                cardElement.appendChild(prioritySpan);
            }
            
            const cardHeader = document.createElement('div');
            cardHeader.className = 'card-header';
            
            const cardTitle = document.createElement('div');
            cardTitle.className = 'card-title';
            cardTitle.textContent = `Ticket #${card.ticketNumber}`;
            
            const cardId = document.createElement('div');
            cardId.className = 'card-id';
            cardId.textContent = `ID: ${card.id.slice(0, 8)}`;
            
            cardHeader.appendChild(cardTitle);
            cardHeader.appendChild(cardId);
            
            const cardContent = document.createElement('div');
            cardContent.className = 'card-content';
            
            const steamField = document.createElement('div');
            steamField.className = 'card-field';
            steamField.innerHTML = `<i class="fab fa-steam"></i> ${card.steamId}`;
            
            const discordField = document.createElement('div');
            discordField.className = 'card-field';
            discordField.innerHTML = `<i class="fab fa-discord"></i> ${card.discordId}`;
            
            const descField = document.createElement('div');
            descField.className = 'card-field';
            descField.textContent = card.description.length > 100 ? 
                `${card.description.substring(0, 100)}...` : card.description;
            
            cardContent.appendChild(steamField);
            cardContent.appendChild(discordField);
            cardContent.appendChild(descField);
            
            // Adicionar preview de screenshots se existirem
            if (card.screenshots && card.screenshots.length > 0) {
                const screenshotsField = document.createElement('div');
                screenshotsField.className = 'card-field';
                screenshotsField.innerHTML = `<i class="fas fa-image"></i> ${card.screenshots.length} print(s) anexado(s)`;
                cardContent.appendChild(screenshotsField);
            }
            
            const cardFooter = document.createElement('div');
            cardFooter.className = 'card-footer';
            
            const cardActions = document.createElement('div');
            cardActions.className = 'card-actions';
            
            const editBtn = document.createElement('button');
            editBtn.className = 'card-action';
            editBtn.innerHTML = '<i class="fas fa-edit"></i>';
            editBtn.title = 'Editar';
            editBtn.addEventListener('click', () => editCard(card.id));
            
            const linkBtn = document.createElement('button');
            linkBtn.className = 'card-action';
            linkBtn.innerHTML = '<i class="fas fa-link"></i>';
            linkBtn.title = 'Vincular a Player';
            linkBtn.addEventListener('click', () => linkReport(card.id));
            
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'card-action';
            deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
            deleteBtn.title = 'Excluir';
            deleteBtn.addEventListener('click', () => deleteCard(card.id));
            
            cardActions.appendChild(editBtn);
            cardActions.appendChild(linkBtn);
            cardActions.appendChild(deleteBtn);
            
            cardFooter.appendChild(cardActions);
            
            // Adicionar timer se existir para este card
            if (timers[card.id]) {
                const timer = document.createElement('div');
                timer.className = 'timer';
                timer.id = `timer-${card.id}`;
                timer.textContent = formatTime(timers[card.id].remaining);
                cardFooter.appendChild(timer);
            }
            
            cardElement.appendChild(cardHeader);
            cardElement.appendChild(cardContent);
            cardElement.appendChild(cardFooter);
            
            return cardElement;
        }
        
        function saveCard() {
            const ticketNumber = document.getElementById('ticket-number').value;
            const steamId = document.getElementById('steam-id-input').value;
            const discordId = document.getElementById('discord-id-input').value;
            const description = document.getElementById('description').value;
            const priority = document.getElementById('priority').value;
            const replayFile = document.getElementById('replay-file').files[0];
            
            // Em uma aplicação real, faríamos upload do arquivo para um servidor
            // Aqui, apenas armazenaremos o nome do arquivo
            const replayFileName = replayFile ? replayFile.name : '';
            
            if (currentCardId) {
                // Modo edição - atualizar card existente
                const cardIndex = cards.findIndex(c => c.id === currentCardId);
                if (cardIndex !== -1) {
                    cards[cardIndex] = {
                        ...cards[cardIndex],
                        ticketNumber,
                        steamId,
                        discordId,
                        description,
                        priority,
                        replayFileName,
                        screenshots: screenshots,
                        updatedAt: new Date().toISOString()
                    };
                    
                    addActivity(`Denúncia #${ticketNumber} atualizada`);
                }
            } else {
                // Modo criação - criar novo card
                const card = {
                    id: generateId(),
                    ticketNumber,
                    steamId,
                    discordId,
                    description,
                    priority,
                    replayFileName,
                    screenshots: screenshots,
                    category: 'Denuncias Pegas', // Categoria padrão
                    createdAt: new Date().toISOString(),
                    createdBy: currentUser.username
                };
                
                cards.push(card);
                currentCardId = card.id;
                
                // Se houver um timer ativo, salvá-lo
                if (timerDisplay.style.display !== 'none') {
                    // Numa aplicação real, calcularíamos o tempo restante
                    timers[currentCardId] = {
                        startedAt: new Date().toISOString(),
                        duration: 24 * 60 * 60 * 1000, // 24 horas em milissegundos
                        remaining: 24 * 60 * 60 * 1000,
                        active: true
                    };
                    localStorage.setItem('timers', JSON.stringify(timers));
                }
                
                // Adicionar à atividade recente
                addActivity(`Nova denúncia criada - Ticket #${ticketNumber}`);
                
                // Verificar se o player existe e adicionar ao histórico
                const player = players.find(p => p.steamId === steamId || p.discordId === discordId);
                if (player) {
                    addToPlayerHistory(player.id, {
                        type: 'Nova Denúncia',
                        description: `Ticket #${ticketNumber}: ${description.substring(0, 50)}...`,
                        date: new Date().toISOString()
                    });
                    
                    // Atualizar a lista de players
                    renderPlayersList();
                }
            }
            
            localStorage.setItem('cards', JSON.stringify(cards));
            
            hideModal();
            renderColumns();
            updateStats();
            showNotification('Denúncia salva com sucesso!', 'success');
        }
        
        function editCard(cardId) {
            showModal(cardId);
        }
        
        function linkReport(cardId) {
            currentLinkingCard = cardId;
            // Preencher o select com os players
            playerToLinkSelect.innerHTML = '';
            players.forEach(player => {
                const option = document.createElement('option');
                option.value = player.id;
                option.textContent = `${player.steamId} / ${player.discordId}`;
                playerToLinkSelect.appendChild(option);
            });
            
            linkReportModal.style.display = 'flex';
        }
        
        function linkReportToPlayer() {
            const playerId = playerToLinkSelect.value;
            const cardId = currentLinkingCard;
            
            if (!playerId) {
                showNotification('Por favor, selecione um player.', 'warning');
                return;
            }
            
            const player = players.find(p => p.id === playerId);
            const card = cards.find(c => c.id === cardId);
            
            if (player && card) {
                // Adicionar à ficha do player
                addToPlayerHistory(playerId, {
                    type: 'Denúncia Vinculada',
                    description: `Ticket #${card.ticketNumber}: ${card.description.substring(0, 50)}...`,
                    date: new Date().toISOString()
                });
                
                showNotification('Denúncia vinculada com sucesso!', 'success');
                hideModal();
                
                // Se estivermos na ficha do player, atualizar o histórico
                if (currentPlayerId === playerId) {
                    renderPlayerHistory(player);
                }
            }
        }
        
        function deleteCard(cardId) {
            const card = cards.find(c => c.id === cardId);
            if (card) {
                cards = cards.filter(card => card.id !== cardId);
                localStorage.setItem('cards', JSON.stringify(cards));
                
                // Remover timer associado se existir
                if (timers[cardId]) {
                    delete timers[cardId];
                    localStorage.setItem('timers', JSON.stringify(timers));
                }
                
                hideModal();
                renderColumns();
                updateStats();
                
                addActivity(`Denúncia #${card.ticketNumber} excluída`);
                showNotification('Denúncia excluída com sucesso!', 'success');
            }
        }
        
        function addCategory() {
            const categoryName = categoryNameInput.value.trim();
            
            if (!categoryName) {
                showNotification('Por favor, insira um nome para o tópico.', 'warning');
                return;
            }
            
            if (categories.includes(categoryName)) {
                showNotification('Já existe um tópico com este nome.', 'warning');
                return;
            }
            
            categories.push(categoryName);
            localStorage.setItem('categories', JSON.stringify(categories));
            
            hideModal();
            renderColumns();
            
            showNotification('Tópico adicionado com sucesso!', 'success');
            categoryNameInput.value = '';
        }
        
        function startTimer() {
            timerDisplay.style.display = 'inline-block';
            timerDisplay.textContent = '24:00:00';
            
            // Em uma aplicação real, iniciaríamos uma contagem regressiva
            showNotification('Timer de 24 horas iniciado!', 'info');
        }
        
        function formatTime(milliseconds) {
            // Converter milissegundos para formato HH:MM:SS
            const seconds = Math.floor(milliseconds / 1000);
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }
        
        function updateStats() {
            // Estatísticas de denúncias
            const now = new Date();
            const currentMonth = now.getMonth();
            const currentYear = now.getFullYear();
            
            // Denúncias finalizadas este mês
            const currentMonthReports = cards.filter(card => {
                if (card.category !== 'Denuncias Finalizadas') return false;
                
                const cardDate = new Date(card.createdAt);
                return cardDate.getMonth() === currentMonth && cardDate.getFullYear() === currentYear;
            }).length;
            
            // Denúncias finalizadas no mês anterior
            const previousMonth = currentMonth === 0 ? 11 : currentMonth - 1;
            const previousYear = currentMonth === 0 ? currentYear - 1 : currentYear;
            
            const previousMonthReports = cards.filter(card => {
                if (card.category !== 'Denuncias Finalizadas') return false;
                
                const cardDate = new Date(card.createdAt);
                return cardDate.getMonth() === previousMonth && cardDate.getFullYear() === previousYear;
            }).length;
            
            // Outras estatísticas
            const inProgress = cards.filter(card => card.category === 'Denuncias Em andamento').length;
            const totalReports = cards.length;
            
            // Estatísticas de players
            const playersWithStrikes = players.filter(player => player.strikes > 0).length;
            const playersWithWarnings = players.filter(player => player.warnings > 0).length;
            const totalPlayers = players.length;
            
            // Timers ativos
            const activeTimers = Object.values(timers).filter(timer => timer.active).length;
            
            // Atualizar a UI
            currentMonthReportsElement.textContent = currentMonthReports;
            previousMonthReportsElement.textContent = previousMonthReports;
            inProgressElement.textContent = inProgress;
            totalReportsElement.textContent = totalReports;
            playersWithStrikesElement.textContent = playersWithStrikes;
            playersWithWarningsElement.textContent = playersWithWarnings;
            totalPlayersElement.textContent = totalPlayers;
            activeTimersElement.textContent = activeTimers;
        }
        
        function renderPlayerList() {
            playerListModal.innerHTML = '';
            
            if (players.length === 0) {
                playerListModal.innerHTML = '<div class="player-item">Nenhum player cadastrado</div>';
                return;
            }
            
            players.forEach(player => {
                const playerItem = document.createElement('div');
                playerItem.className = 'player-item';
                playerItem.textContent = `${player.steamId} (${player.discordId})`;
                playerItem.addEventListener('click', () => {
                    document.getElementById('steam-id-input').value = player.steamId;
                    document.getElementById('discord-id-input').value = player.discordId;
                    playerListModal.innerHTML = '';
                });
                
                playerListModal.appendChild(playerItem);
            });
        }
        
        function filterPlayers(query) {
            const filteredPlayers = players.filter(player => 
                player.steamId.toLowerCase().includes(query.toLowerCase()) || 
                player.discordId.toLowerCase().includes(query.toLowerCase())
            );
            
            playerListModal.innerHTML = '';
            
            if (filteredPlayers.length === 0) {
                playerListModal.innerHTML = '<div class="player-item">Nenhum player encontrado</div>';
                return;
            }
            
            filteredPlayers.forEach(player => {
                const playerItem = document.createElement('div');
                playerItem.className = 'player-item';
                playerItem.textContent = `${player.steamId} (${player.discordId})`;
                playerItem.addEventListener('click', () => {
                    document.getElementById('steam-id-input').value = player.steamId;
                    document.getElementById('discord-id-input').value = player.discordId;
                    playerListModal.innerHTML = '';
                });
                
                playerListModal.appendChild(playerItem);
            });
        }
        
        function filterPlayersList(query) {
            const filteredPlayers = players.filter(player => 
                player.steamId.toLowerCase().includes(query.toLowerCase())
            );
            
            renderPlayersList(filteredPlayers);
        }
        
        function savePlayerProfile() {
            const steamId = profileSteamIdInput.value;
            const discordId = profileDiscordIdInput.value;
            const behavior = profileBehaviorInput.value;
            const strikes = parseInt(strikesCountElement.textContent);
            const warnings = parseInt(warningsCountElement.textContent);
            
            if (!steamId || !discordId) {
                showNotification('Por favor, preencha pelo menos o ID Steam e o ID Discord.', 'warning');
                return;
            }
            
            if (currentPlayerId) {
                // Modo edição - atualizar player existente
                const playerIndex = players.findIndex(p => p.id === currentPlayerId);
                if (playerIndex !== -1) {
                    const oldStrikes = players[playerIndex].strikes;
                    const oldWarnings = players[playerIndex].warnings;
                    
                    players[playerIndex] = {
                        ...players[playerIndex],
                        steamId,
                        discordId,
                        behavior,
                        strikes,
                        warnings,
                        updatedAt: new Date().toISOString()
                    };
                    
                    // Adicionar ao histórico se houve mudança em strikes ou orientações
                    if (oldStrikes !== strikes) {
                        addToPlayerHistory(currentPlayerId, {
                            type: strikes > oldStrikes ? 'Strike Adicionado' : 'Strike Removido',
                            description: `Strikes alterados de ${oldStrikes} para ${strikes}`,
                            date: new Date().toISOString()
                        });
                    }
                    
                    if (oldWarnings !== warnings) {
                        addToPlayerHistory(currentPlayerId, {
                            type: warnings > oldWarnings ? 'Orientação Adicionada' : 'Orientação Removida',
                            description: `Orientações alteradas de ${oldWarnings} para ${warnings}`,
                            date: new Date().toISOString()
                        });
                    }
                    
                    addActivity(`Ficha de player atualizada - ${steamId}`);
                    showNotification('Ficha de player atualizada com sucesso!', 'success');
                }
            } else {
                // Modo criação - criar novo player
                const player = {
                    id: generateId(),
                    steamId,
                    discordId,
                    behavior,
                    strikes,
                    warnings,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString(),
                    history: []
                };
                
                players.push(player);
                currentPlayerId = player.id;
                
                addActivity(`Nova ficha de player criada - ${steamId}`);
                showNotification('Ficha de player criada com sucesso!', 'success');
            }
            
            localStorage.setItem('players', JSON.stringify(players));
            renderPlayerList();
            renderPlayersList(); // Atualizar a lista de players na interface
            updateStats();
        }
        
        function searchPlayer() {
            const query = playerSearchMain.value.toLowerCase();
            
            if (!query) {
                showNotification('Por favor, digite um ID Steam ou Discord para pesquisar.', 'warning');
                return;
            }
            
            const player = players.find(p => 
                p.steamId.toLowerCase().includes(query) || 
                p.discordId.toLowerCase().includes(query)
            );
            
            if (player) {
                // Preencher o formulário com os dados do player
                currentPlayerId = player.id;
                profileSteamIdInput.value = player.steamId;
                profileDiscordIdInput.value = player.discordId;
                profileBehaviorInput.value = player.behavior || '';
                strikesCountElement.textContent = player.strikes || 0;
                warningsCountElement.textContent = player.warnings || 0;
                
                // Preencher histórico
                renderPlayerHistory(player);
                
                showNotification('Player encontrado com sucesso!', 'success');
            } else {
                showNotification('Nenhum player encontrado com esses dados.', 'warning');
            }
        }
        
        function renderPlayerHistory(player) {
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = '';
            
            if (!player.history || player.history.length === 0) {
                historyList.innerHTML = `
                    <div class="text-center text-muted mt-20">
                        <i class="fas fa-history fa-2x"></i>
                        <p>Nenhum histórico encontrado</p>
                    </div>
                `;
                return;
            }
            
            player.history.forEach(event => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                
                const historyIcon = document.createElement('div');
                historyIcon.className = 'history-icon';
                
                let iconClass = 'fas fa-info-circle';
                if (event.type.includes('Strike')) iconClass = 'fas fa-exclamation-triangle';
                if (event.type.includes('Orientação')) iconClass = 'fas fa-comment-dots';
                if (event.type.includes('Denúncia')) iconClass = 'fas fa-clipboard-list';
                
                historyIcon.innerHTML = `<i class="${iconClass}"></i>`;
                
                const historyContent = document.createElement('div');
                historyContent.className = 'history-content';
                
                const historyTitle = document.createElement('div');
                historyTitle.className = 'history-title';
                historyTitle.textContent = event.type;
                
                const historyDesc = document.createElement('div');
                historyDesc.className = 'history-desc';
                historyDesc.textContent = event.description;
                
                const historyDate = document.createElement('div');
                historyDate.className = 'history-date';
                historyDate.textContent = new Date(event.date).toLocaleString();
                
                historyContent.appendChild(historyTitle);
                historyContent.appendChild(historyDesc);
                historyContent.appendChild(historyDate);
                
                historyItem.appendChild(historyIcon);
                historyItem.appendChild(historyContent);
                
                historyList.appendChild(historyItem);
            });
        }
        
        function showPlayerHistory(player) {
            modalHistoryList.innerHTML = '';
            
            if (!player.history || player.history.length === 0) {
                modalHistoryList.innerHTML = `
                    <div class="text-center text-muted mt-20">
                        <i class="fas fa-history fa-2x"></i>
                        <p>Nenhum histórico encontrado</p>
                    </div>
                `;
            } else {
                player.history.forEach(event => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    
                    const historyIcon = document.createElement('div');
                    historyIcon.className = 'history-icon';
                    
                    let iconClass = 'fas fa-info-circle';
                    if (event.type.includes('Strike')) iconClass = 'fas fa-exclamation-triangle';
                    if (event.type.includes('Orientação')) iconClass = 'fas fa-comment-dots';
                    if (event.type.includes('Denúncia')) iconClass = 'fas fa-clipboard-list';
                    
                    historyIcon.innerHTML = `<i class="${iconClass}"></i>`;
                    
                    const historyContent = document.createElement('div');
                    historyContent.className = 'history-content';
                    
                    const historyTitle = document.createElement('div');
                    historyTitle.className = 'history-title';
                    historyTitle.textContent = event.type;
                    
                    const historyDesc = document.createElement('div');
                    historyDesc.className = 'history-desc';
                    historyDesc.textContent = event.description;
                    
                    const historyDate = document.createElement('div');
                    historyDate.className = 'history-date';
                    historyDate.textContent = new Date(event.date).toLocaleString();
                    
                    historyContent.appendChild(historyTitle);
                    historyContent.appendChild(historyDesc);
                    historyContent.appendChild(historyDate);
                    
                    historyItem.appendChild(historyIcon);
                    historyItem.appendChild(historyContent);
                    
                    modalHistoryList.appendChild(historyItem);
                });
            }
            
            historyModal.style.display = 'flex';
        }
        
        function updateStrikes(value) {
            let current = parseInt(strikesCountElement.textContent);
            current += value;
            
            if (current < 0) current = 0;
            
            strikesCountElement.textContent = current;
        }
        
        function updateWarnings(value) {
            let current = parseInt(warningsCountElement.textContent);
            current += value;
            
            if (current < 0) current = 0;
            
            warningsCountElement.textContent = current;
        }
        
        function resetPlayerForm() {
            currentPlayerId = null;
            profileSteamIdInput.value = '';
            profileDiscordIdInput.value = '';
            profileBehaviorInput.value = '';
            strikesCountElement.textContent = '0';
            warningsCountElement.textContent = '0';
            
            const historyList = document.getElementById('history-list');
            historyList.innerHTML = `
                <div class="text-center text-muted mt-20">
                    <i class="fas fa-history fa-2x"></i>
                    <p>Nenhum histórico encontrado</p>
                </div>
            `;
        }
        
        function addToPlayerHistory(playerId, event) {
            const playerIndex = players.findIndex(p => p.id === playerId);
            if (playerIndex !== -1) {
                if (!players[playerIndex].history) {
                    players[playerIndex].history = [];
                }
                players[playerIndex].history.unshift(event);
                localStorage.setItem('players', JSON.stringify(players));
            }
        }
        
        function addActivity(message) {
            const activity = {
                message,
                timestamp: new Date().toISOString(),
                user: currentUser.username
            };
            
            activities.unshift(activity);
            
            // Manter apenas as 50 atividades mais recentes
            if (activities.length > 50) {
                activities = activities.slice(0, 50);
            }
            
            localStorage.setItem('activities', JSON.stringify(activities));
            renderActivities();
        }
        
        function renderActivities() {
            activityList.innerHTML = '';
            
            if (activities.length === 0) {
                activityList.innerHTML = `
                    <div class="text-center text极
                    <div class="text-center text-muted mt-20">
                        <i class="fas fa-info-circle fa-2x"></i>
                        <p>Nenhuma atividade registrada</p>
                    </div>
                `;
                return;
            }
            
            activities.forEach(activity => {
                const activityItem = document.createElement('div');
                activityItem.className = 'activity-item';
                
                const activityIcon = document.createElement('div');
                activityIcon.className = 'activity-icon';
                activityIcon.innerHTML = '<i class="fas fa-info-circle"></i>';
                
                const activityContent = document.createElement('div');
                activityContent.className = 'activity-content';
                
                const activityTitle = document.createElement('div');
                activityTitle.className = 'activity-title';
                activityTitle.textContent = activity.message;
                
                const activityDate = document.createElement('div');
                activityDate.className = 'activity-date';
                activityDate.textContent = `${new Date(activity.timestamp).toLocaleString()} - Por: ${activity.user}`;
                
                activityContent.appendChild(activityTitle);
                activityContent.appendChild(activityDate);
                
                activityItem.appendChild(activityIcon);
                activityItem.appendChild(activityContent);
                
                activityList.appendChild(activityItem);
            });
        }
        
        function saveNotes() {
            notes = notesTextarea.value;
            localStorage.setItem('notes', JSON.stringify(notes));
            addActivity('Anotações gerais salvas');
            showNotification('Anotações salvas com sucesso!', 'success');
        }
        
        function clearNotes() {
            if (confirm('Tem certeza que deseja limpar todas as anotações? Esta ação não pode ser desfeita.')) {
                notesTextarea.value = '';
                notes = '';
                localStorage.setItem('notes', JSON.stringify(notes));
                addActivity('Anotações gerais limpas');
                showNotification('Anotações limpas com sucesso!', 'success');
            }
        }
        
        // Função para renderizar a lista de players na aba de fichas
        function renderPlayersList(playersToRender = players) {
            playersListContainer.innerHTML = '';
            
            if (playersToRender.length === 0) {
                playersListContainer.innerHTML = `
                    <div class="text-center text-muted mt-20">
                        <i class="fas fa-users fa-2x"></i>
                        <p>Nenhum player encontrado</p>
                    </div>
                `;
                return;
            }
            
            playersToRender.forEach(player => {
                const playerItem = document.createElement('div');
                playerItem.className = 'player-list-item';
                
                const playerInfo = document.createElement('div');
                playerInfo.className = 'player-info';
                
                const playerName = document.createElement('div');
                playerName.className = 'player-name';
                playerName.textContent = `${player.steamId} / ${player.discordId}`;
                
                const playerStats = document.createElement('div');
                playerStats.className = 'player-stats';
                
                if (player.strikes > 0) {
                    const strikeStat = document.createElement('span');
                    strikeStat.className = 'player-stat strikes';
                    strikeStat.textContent = `${player.strikes} Strike${player.strikes !== 1 ? 's' : ''}`;
                    playerStats.appendChild(strikeStat);
                }
                
                if (player.warnings > 0) {
                    const warningStat = document.createElement('span');
                    warningStat.className = 'player-stat warnings';
                    warningStat.textContent = `${player.warnings} Orientaç${player.warnings !== 1 ? 'ões' : 'ão'}`;
                    playerStats.appendChild(warningStat);
                }
                
                playerInfo.appendChild(playerName);
                playerInfo.appendChild(playerStats);
                
                const playerActions = document.createElement('div');
                playerActions.className = 'player-actions';
                
                const viewBtn = document.createElement('button');
                viewBtn.className = 'btn btn-secondary';
                viewBtn.innerHTML = '<i class="fas fa-eye"></i>';
                viewBtn.title = 'Visualizar Histórico';
                viewBtn.addEventListener('click', () => {
                    showPlayerHistory(player);
                });
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn btn-danger';
                deleteBtn.innerHTML = '<i class="fas fa-trash"></i>';
                deleteBtn.title = 'Excluir';
                deleteBtn.addEventListener('click', () => {
                    confirmAction('Tem certeza que deseja excluir este player?', () => {
                        deletePlayer(player.id);
                    });
                });
                
                playerActions.appendChild(viewBtn);
                playerActions.appendChild(deleteBtn);
                
                playerItem.appendChild(playerInfo);
                playerItem.appendChild(playerActions);
                
                playersListContainer.appendChild(playerItem);
            });
        }
        
        function deletePlayer(playerId) {
            const playerIndex = players.findIndex(p => p.id === playerId);
            if (playerIndex !== -1) {
                const player = players[playerIndex];
                players.splice(playerIndex, 1);
                localStorage.setItem('players', JSON.stringify(players));
                
                // Se o player excluído está sendo visualizado, limpar o formulário
                if (currentPlayerId === playerId) {
                    resetPlayerForm();
                }
                
                renderPlayersList();
                updateStats();
                
                addActivity(`Player ${player.steamId} excluído`);
                showNotification('Player excluído com sucesso!', 'success');
            }
        }
        
        function handleScreenshotUpload(e) {
            const files = e.target.files;
            if (!files || files.length === 0) return;
            
            for (let i = 0; i < files.length; i++) {
                const file = files[i];
                if (!file.type.match('image.*')) continue;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    screenshots.push(e.target.result);
                    renderScreenshots();
                };
                reader.readAsDataURL(file);
            }
            
            // Limpar o input para permitir adicionar mais arquivos
            screenshotsInput.value = '';
        }
        
        function renderScreenshots() {
            screenshotsGallery.innerHTML = '';
            
            screenshots.forEach((screenshot, index) => {
                const screenshotItem = document.createElement('div');
                screenshotItem.className = 'screenshot-item';
                
                const img = document.createElement('img');
                img.src = screenshot;
                img.addEventListener('click', () => {
                    expandedImg.src = screenshot;
                    imageModal.style.display = 'flex';
                });
                
                const removeBtn = document.createElement('button');
                removeBtn.className = 'screenshot-remove';
                removeBtn.innerHTML = '×';
                removeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    screenshots.splice(index, 1);
                    renderScreenshots();
                });
                
                screenshotItem.appendChild(img);
                screenshotItem.appendChild(removeBtn);
                screenshotsGallery.appendChild(screenshotItem);
            });
        }
        
        function showNotification(message, type = 'info') {
            // Notification simples
            const notification = document.createElement('div');
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.padding = '15px 20px';
            notification.style.borderRadius = 'var(--border-radius)';
            notification.style.color = 'white';
            notification.style.zIndex = '10000';
            notification.style.boxShadow = 'var(--box-shadow)';
            notification.style.maxWidth = '350px';
            notification.style.animation = 'slideIn 0.3s ease';
            
            switch(type) {
                case 'success':
                    notification.style.background = 'var(--success)';
                    break;
                case 'error':
                    notification.style.background = 'var(--danger)';
                    break;
                case 'warning':
                    notification.style.background = 'var(--warning)';
                    break;
                default:
                    notification.style.background = 'var(--secondary)';
            }
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 10px;">
                    <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                    <div>${message}</div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Remover após 5 segundos
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s ease';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 5000);
        }
        
        function confirmAction(message, callback) {
            if (confirm(message)) {
                callback();
            }
        }
        
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }
    </script>
</body>
</html>